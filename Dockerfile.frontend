FROM node:20-alpine

WORKDIR /app/src/frontend

RUN npm install -g pnpm

COPY src/frontend/package.json src/frontend/pnpm-lock.yaml src/frontend/pnpm-workspace.yaml ./
RUN pnpm install --frozen-lockfile

COPY src/frontend/ ./

ENV VITE_API_URL=http://localhost:5000

EXPOSE 5173

CMD ["pnpm", "dev", "--host", "0.0.0.0", "--port", "5173", "--strictPort"]
